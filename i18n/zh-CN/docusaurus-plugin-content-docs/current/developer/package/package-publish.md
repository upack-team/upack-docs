# 软件包发布

## 概述

Steedos 软件包允许开发者将应用、组件、资源打包，使其可以轻松地在不同的项目和团队之间共享和重用。这些包是基于 npm（一个流行的 JavaScript 包管理器）规范，利用 npm 可以管理包的发布、版本管理和依赖关系。

## 基本概念

### 1. Steedos 软件包

- **定义**：一个 Steedos Package 是一个包含所有必要文件和资源的软件包，用于在 Steedos 平台上实现特定的功能或应用程序。
- **package.service.js**: 每一个 Steedos 软件包必须包含一个 package.service.js 。
- **组件**：软件包可以包含一系列组件，如对象定义、触发器、视图、流程等。

### 2. npm

- **定义**：npm 是世界上最大的软件包注册和管理系统，主要用于 JavaScript。
- **功能**：通过 npm，您可以自动处理项目的依赖关系和版本管理，发布的包可以被公开检索和安装。

## 准备工作

在发布您的 Steedos Package 之前，您需要准备以下事项：

- **npm 账户**：访问 [npm 官网](https://www.npmjs.com/) 创建一个账户并验证您的邮箱。
- **项目文件**：整理您的 Steedos 项目，确保所有文件都已准备妥当，并且遵循了 Steedos 和 npm 的最佳实践。

## 发布流程

以下是将您的 Steedos Package 发布到 npm 的详细步骤：

### 1. 配置 `package.json` 文件

在您的项目根目录创建或更新 `package.json` 文件，它是您的项目的说明书，包含如下信息：

```json
{
  "name": "your-package-name",
  "version": "1.0.0",
  "description": "简短描述您的包",
  "main": "index.js",
  "author": "Your Name <youremail@example.com>",
  "homepage": "https://github.com/yourusername/your-package-name#readme"
}
```

### 2. 登录 npm 账户
在命令行或终端中，运行以下命令并按照提示输入您的凭据：

```shell
npm login
```

### 3. 发布您的包
确保当前目录为您的项目根目录，然后执行：

```shell
npm publish
```

这会将您的包上传到 npm。如果您的包是公开的，那么现在任何人都可以访问和安装它。对于私有的包，您可能需要付费订阅 npm 的私有仓库服务。

### 4. 版本管理

每次发布时，您都应该更新 package.json 文件中的版本号。遵循 语义化版本 规则（即主版本号、次版本号、补丁版本号）是一个好习惯。

通过以上步骤，您的 Steedos Package 应该已成功发布到 npm，并可在Steedos平台中安装。记住，维护一个清晰的文档和更新日志对于管理软件包版本和与社区的沟通至关重要。

## 发布私有软件包

有时候，您的 Steedos Package 可能含有敏感或私有的代码，不适合发布为公开的 npm 包。npm 提供了私有包的功能，让您能够控制谁可以安装您的软件包，保护您的代码不被未经授权的用户访问。

### 设置私有包

要将您的 Steedos Package 设置为私有，您需要在 `package.json` 文件中添加或修改以下行：

```json
{
  "private": true
}
```

这确保了您的包不会被公开发布到 npm。但是，仅仅这样设置是不够的，因为这样并不会将您的包上传到 npm。

### 发布到 npm 私有仓库

npm 提供了付费的私有仓库（npm Private Packages）服务，允许您发布私有包。要使用这项服务，您需要：

- **购买订阅**：访问 npm 官网，选择适合的计划并购买私有仓库服务。
- **认证账户**：在您的命令行或终端中，使用相同的 npm login 命令，确保您登录的是有权发布私有包的账户。
- **发布**：与发布公开包相同，您使用：

```shell
npm publish
```

但是，因为您的 package.json 标记了 "private": true，npm 会将其发布到您的私有仓库而非公开索引。

### 权限管理

私有包需要管理哪些用户或团队可以访问。您可以在 npm 官网的仓库设置中配置这些权限，确保只有被授权的成员可以安装或修改您的私有包。

通过以上步骤，您可以成功地发布私有软件包，并控制对其的访问。这为含有敏感信息、私有代码或内部工具的项目提供了安全保障。

